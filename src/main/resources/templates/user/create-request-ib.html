<!DOCTYPE html>
<html lang="en">
<!--begin::Head-->

<head>
	<base href="">
	<title>Index</title>
	<meta name="description"
		content="The most advanced Bootstrap Admin Theme on Themeforest trusted by 94,000 beginners and professionals. Multi-demo, Dark Mode, RTL support and complete React, Angular, Vue & Laravel versions. Grab your copy now and get life-time updates for free." />
	<meta name="keywords"
		content="Metronic, bootstrap, bootstrap 5, Angular, VueJs, React, Laravel, admin themes, web design, figma, web development, free templates, free admin themes, bootstrap theme, bootstrap template, bootstrap dashboard, bootstrap dak mode, bootstrap button, bootstrap datepicker, bootstrap timepicker, fullcalendar, datatables, flaticon" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta charset="utf-8" />
	<meta property="og:locale" content="en_US" />
	<meta property="og:type" content="article" />
	<meta property="og:title"
		content="Metronic - Bootstrap 5 HTML, VueJS, React, Angular & Laravel Admin Dashboard Theme" />
	<link rel="shortcut icon" th:href="@{/media/logos/favicon.ico}" />
	<!--begin::Fonts-->
	<link rel="stylesheet" th:href="@{https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700}" />
	<!--end::Fonts-->
	<!--begin::Page Vendor Stylesheets(used by this page)-->
	<link th:href="@{/plugins/custom/fullcalendar/fullcalendar.bundle.css}" rel="stylesheet" type="text/css" />
	<!--end::Page Vendor Stylesheets-->
	<!--begin::Global Stylesheets Bundle(used by all pages)-->
	<link th:href="@{/plugins/global/plugins.bundle.css}" rel="stylesheet" type="text/css" />
	<link th:href="@{/css/style.bundle.css}" rel="stylesheet" type="text/css" />
	<!--end::Global Stylesheets Bundle-->
</head>
<!--end::Head-->
<!--begin::Body-->

<body id="kt_body" class="header-tablet-and-mobile-fixed aside-enabled">
	<!--begin::Main-->
	<!--begin::Root-->
	<div class="d-flex flex-column flex-root">
		<!--begin::Page-->
		<div class="page d-flex flex-row flex-column-fluid">
			<!--begin::Aside-->
			<div th:replace="~{/layout/user-sidebar :: kt-aside}"></div>
			<!--end::Aside-->
			<!--begin::Wrapper-->
			<div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
				<!--begin::Header-->
				<div id="kt_header" style="" class="header align-items-stretch">
					<!--begin::Brand-->
					<div class="header-brand">
						<!--begin::Logo-->
						<a href="../../demo8/dist/index.html">
							<img alt="Logo" th:src="@{/media/logos/logo-1-dark.svg}" class="h-25px h-lg-25px" />
						</a>
						<!--end::Logo-->
						<!--begin::Aside minimize-->
						<div id="kt_aside_toggle"
							class="btn btn-icon w-auto px-0 btn-active-color-primary aside-minimize"
							data-kt-toggle="true" data-kt-toggle-state="active" data-kt-toggle-target="body"
							data-kt-toggle-name="aside-minimize">
							<!--begin::Svg Icon | path: icons/duotune/arrows/arr092.svg-->
							<span class="svg-icon svg-icon-1 me-n1 minimize-default">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
									fill="none">
									<rect opacity="0.3" x="8.5" y="11" width="12" height="2" rx="1" fill="black" />
									<path
										d="M10.3687 11.6927L12.1244 10.2297C12.5946 9.83785 12.6268 9.12683 12.194 8.69401C11.8043 8.3043 11.1784 8.28591 10.7664 8.65206L7.84084 11.2526C7.39332 11.6504 7.39332 12.3496 7.84084 12.7474L10.7664 15.3479C11.1784 15.7141 11.8043 15.6957 12.194 15.306C12.6268 14.8732 12.5946 14.1621 12.1244 13.7703L10.3687 12.3073C10.1768 12.1474 10.1768 11.8526 10.3687 11.6927Z"
										fill="black" />
									<path opacity="0.5"
										d="M16 5V6C16 6.55228 15.5523 7 15 7C14.4477 7 14 6.55228 14 6C14 5.44772 13.5523 5 13 5H6C5.44771 5 5 5.44772 5 6V18C5 18.5523 5.44771 19 6 19H13C13.5523 19 14 18.5523 14 18C14 17.4477 14.4477 17 15 17C15.5523 17 16 17.4477 16 18V19C16 20.1046 15.1046 21 14 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H14C15.1046 3 16 3.89543 16 5Z"
										fill="black" />
								</svg>
							</span>
							<!--end::Svg Icon-->
							<!--begin::Svg Icon | path: icons/duotune/arrows/arr076.svg-->
							<span class="svg-icon svg-icon-1 minimize-active">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
									fill="none">
									<rect opacity="0.3" width="12" height="2" rx="1"
										transform="matrix(-1 0 0 1 15.5 11)" fill="black" />
									<path
										d="M13.6313 11.6927L11.8756 10.2297C11.4054 9.83785 11.3732 9.12683 11.806 8.69401C12.1957 8.3043 12.8216 8.28591 13.2336 8.65206L16.1592 11.2526C16.6067 11.6504 16.6067 12.3496 16.1592 12.7474L13.2336 15.3479C12.8216 15.7141 12.1957 15.6957 11.806 15.306C11.3732 14.8732 11.4054 14.1621 11.8756 13.7703L13.6313 12.3073C13.8232 12.1474 13.8232 11.8526 13.6313 11.6927Z"
										fill="black" />
									<path
										d="M8 5V6C8 6.55228 8.44772 7 9 7C9.55228 7 10 6.55228 10 6C10 5.44772 10.4477 5 11 5H18C18.5523 5 19 5.44772 19 6V18C19 18.5523 18.5523 19 18 19H11C10.4477 19 10 18.5523 10 18C10 17.4477 9.55228 17 9 17C8.44772 17 8 17.4477 8 18V19C8 20.1046 8.89543 21 10 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3H10C8.89543 3 8 3.89543 8 5Z"
										fill="#C4C4C4" />
								</svg>
							</span>
							<!--end::Svg Icon-->
						</div>
						<!--end::Aside minimize-->
						<!--begin::Aside toggle-->
						<div class="d-flex align-items-center d-lg-none ms-n3 me-1" title="Show aside menu">
							<div class="btn btn-icon btn-active-color-primary w-30px h-30px"
								id="kt_aside_mobile_toggle">
								<!--begin::Svg Icon | path: icons/duotune/abstract/abs015.svg-->
								<span class="svg-icon svg-icon-1">
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
										fill="none">
										<path
											d="M21 7H3C2.4 7 2 6.6 2 6V4C2 3.4 2.4 3 3 3H21C21.6 3 22 3.4 22 4V6C22 6.6 21.6 7 21 7Z"
											fill="black" />
										<path opacity="0.3"
											d="M21 14H3C2.4 14 2 13.6 2 13V11C2 10.4 2.4 10 3 10H21C21.6 10 22 10.4 22 11V13C22 13.6 21.6 14 21 14ZM22 20V18C22 17.4 21.6 17 21 17H3C2.4 17 2 17.4 2 18V20C2 20.6 2.4 21 3 21H21C21.6 21 22 20.6 22 20Z"
											fill="black" />
									</svg>
								</span>
								<!--end::Svg Icon-->
							</div>
						</div>
						<!--end::Aside toggle-->
					</div>
					<!--end::Brand-->
					<div class="toolbar">
						<!--begin::Toolbar-->
						<div
							class="container-fluid py-6 py-lg-0 d-flex flex-column flex-lg-row align-items-lg-stretch justify-content-lg-between">
							<!--begin::Page title-->
							<div class="page-title d-flex flex-column me-5">
								<!--begin::Title-->
								<h1 class="d-flex flex-column text-dark fw-bolder fs-3 mb-0">Dashboard</h1>
								<!--end::Title-->
								<!--begin::Breadcrumb-->
								<ul class="breadcrumb breadcrumb-separatorless fw-bold fs-7 pt-1">
                                    <!--begin::Item-->
                                    <li class="breadcrumb-item text-muted">
                                        <a href="../../demo8/dist/index.html"
                                            class="text-muted text-hover-primary">Izin Bermalam</a>
                                    </li>
                                    <!--end::Item-->
                                    <!--begin::Item-->
                                    <li class="breadcrumb-item">
                                        <span class="bullet bg-gray-200 w-5px h-2px"></span>
                                    </li>
                                    <!--end::Item-->
                                    <!--begin::Item-->
                                    <li class="breadcrumb-item text-muted">
                                        <a href="../../demo8/dist/index.html"
                                            class="text-muted text-hover-primary">List Izin Bermalam</a>
                                    </li>
                                    <!--end::Item-->
                                    <!--begin::Item-->
                                    <li class="breadcrumb-item">
                                        <span class="bullet bg-gray-200 w-5px h-2px"></span>
                                    </li>
                                    <!--end::Item-->
                                    <!--begin::Item-->
                                    <li class="breadcrumb-item text-dark">Request Izin Bermalam</li>
                                    <!--end::Item-->
                                </ul>
								<!--end::Breadcrumb-->
							</div>
							<div class="d-flex align-items-center overflow-auto pt-3 pt-lg-0">
								<div class="d-flex align-items-center">
									<div class="d-flex">
										<div class="d-flex align-items-center">
											<div class="menu menu-sub menu-sub-dropdown menu-column w-350px w-lg-375px"
												data-kt-menu="true">
												<div class="tab-content">
													<div class="tab-pane fade" id="kt_topbar_notifications_3"
														role="tabpanel">
														<div>
															<div></div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<!--end::Page title-->
								</div>
							</div>
						</div>
						<!--end::Toolbar-->
					</div>
				</div>
				<!--begin::Content-->
				<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
				    <div class="d-flex flex-column-fluid">
				        <div class="container">
				            <div class="card card-custom">
				                <div class="card-header">
				                    <h3 class="card-title">Buat Permintaan Izin Bermalam</h3>
				                </div>
				                <!--begin::Form-->
				                <form id="izinBermalamForm" th:action="@{/izinbermalam/create-izinbermalam}" th:object="${izinBermalam}" method="post">
				                    <div class="card-body">
				                        <div class="form-group">
				                            <label>Rencana Berangkat</label>
				                            <input id="rencana_berangkat" type="datetime-local" th:field="*{rencana_berangkat}" class="form-control" required />
				                        </div>
				                        <div class="form-group">
				                            <label>Rencana Kembali</label>
				                            <input id="rencana_kembali" type="datetime-local" th:field="*{rencana_kembali}" class="form-control" required />
				                        </div>
				                        <div class="form-group">
				                            <label>Keperluan Izin Bermalam</label>
				                            <textarea id="keperluan_ib" th:field="*{keperluan_ib}" class="form-control" rows="3" placeholder="Masukkan keperluan izin bermalam" required></textarea>
				                        </div>
				                    </div>
				                    <div class="card-footer">
				                        <button type="button" class="btn btn-primary mr-2" onclick="submitForm()">Kirim</button>
				                        <button type="reset" class="btn btn-secondary">Batal</button>
				                    </div>
				                </form>
				                <!--end::Form-->
				            </div>
				        </div>
				    </div>
				</div>
				<!--end::Content-->
				<!--begin::Footer-->

				<div class="footer py-4 d-flex flex-lg-column" id="kt_footer">
					<!--begin::Container-->
					<div
						class="container-fluid d-flex flex-column flex-md-row align-items-center justify-content-between">
						<!--begin::Copyright-->
						<div class="text-dark order-2 order-md-1">
							<span class="text-muted fw-bold me-1">2021Â©</span>
							<a href="https://keenthemes.com" target="_blank"
								class="text-gray-800 text-hover-primary">Keenthemes</a>
						</div>
						<!--end::Copyright-->
						<!--begin::Menu-->
						<ul class="menu menu-gray-600 menu-hover-primary fw-bold order-1">
							<li class="menu-item">
								<a href="https://keenthemes.com" target="_blank" class="menu-link px-2">About</a>
							</li>
							<li class="menu-item">
								<a href="https://keenthemes.com/support" target="_blank"
									class="menu-link px-2">Support</a>
							</li>
							<li class="menu-item">
								<a href="https://1.envato.market/EA4JP" target="_blank"
									class="menu-link px-2">Purchase</a>
							</li>
						</ul>
						<!--end::Menu-->
					</div>
					<!--end::Container-->
				</div>
				<!--end::Footer-->
			</div>
			<!--end::Wrapper-->
		</div>
		<!--end::Page-->
	</div>
	<!--end::Root-->
	<!--begin::Scrolltop-->
	<div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
		<!--begin::Svg Icon | path: icons/duotune/arrows/arr066.svg-->
		<span class="svg-icon">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
				<rect opacity="0.5" x="13" y="6" width="13" height="2" rx="1" transform="rotate(90 13 6)"
					fill="black" />
				<path
					d="M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z"
					fill="black" />
			</svg>
		</span>
		<!--end::Svg Icon-->
	</div>

	<!--end::Scrolltop-->
	<!--end::Main-->
	<script>var hostUrl = "static/";</script>
	<!--begin::Javascript-->
	<!--begin::Global Javascript Bundle(used by all pages)-->
	<script th:src="@{/plugins/global/plugins.bundle.js}"></script>
	<script th:src="@{/js/scripts.bundle.js}"></script>
	<!--end::Global Javascript Bundle-->
	<!--begin::Page Vendors Javascript(used by this page)-->
	<script th:src="@{/plugins/custom/fullcalendar/fullcalendar.bundle.js}"></script>
	<!--end::Page Vendors Javascript-->
	<!--begin::Page Custom Javascript(used by this page)-->
	<script th:src="@{/js/custom/widgets.js}"></script>
	<script th:src="@{/js/custom/apps/chat/chat.js}"></script>
	<script th:src="@{/js/custom/modals/create-app.js}"></script>
	<script th:src="@{/js/custom/modals/upgrade-plan.js}"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script>
	    function submitForm() {
	        // Get the value of the fields
	        var rencanaBerangkatValue = document.getElementById("rencana_berangkat").value;
	        var rencanaKembaliValue = document.getElementById("rencana_kembali").value;
	        var keperluanIbValue = document.getElementById("keperluan_ib").value;
	
	        // Perform validation
	        if (rencanaBerangkatValue === "" || rencanaKembaliValue === "" || keperluanIbValue === "") {
	            // Display SweetAlert for validation error
	            Swal.fire({
	                icon: 'error',
	                title: 'Validation Error',
	                text: 'Semua field harus diisi!',
	            });
	            return; // Stop form submission if validation fails
	        }
	
	        // If validation passes, proceed with form submission
	        var formData = {
	            "rencana_berangkat": rencanaBerangkatValue,
	            "rencana_kembali": rencanaKembaliValue,
	            "keperluan_ib": keperluanIbValue
	            // Add other form fields as needed
	        };
	
	        fetch('/izinbermalam/create-izinbermalam', {
	            method: 'POST',
	            headers: {
	                'Content-Type': 'application/json',
	            },
	            body: JSON.stringify(formData),
	        })
	        .then(response => {
	            // Handle the response as needed
	            if (response.ok) {
	                Swal.fire({
	                    icon: 'success',
	                    title: 'Berhasil',
	                    text: 'Izin bermalam berhasil dibuat!',
	                }).then(() => {
	                    window.location.href = "/izinbermalam/request";  // redirect to the new page
	                });
	            } else {
	                Swal.fire({
	                    icon: 'error',
	                    title: 'Oops...',
	                    text: 'Terjadi kesalahan saat membuat izin bermalam!',
	                });
	            }
	        })
	        .catch(error => {
	            console.error('Error:', error);
	            Swal.fire({
	                icon: 'error',
	                title: 'Oops...',
	                text: 'Terjadi kesalahan saat membuat izin bermalam!',
	            });
	        });
	    }
	</script>
	<script th:src="@{https://code.jquery.com/jquery-3.6.4.min.js}"></script>
	<script>
		$(document).ready(function () {
			// Mendapatkan nilai menu yang disimpan di localStorage
			var activeMenu = localStorage.getItem('activeMenu');

			// Mengatur kelas 'active' pada menu yang sesuai
			if (activeMenu) {
				$('.menu-link[href="' + activeMenu + '"]').addClass('active');
			}

			$('.menu-link').click(function (e) {
				var href = $(this).attr('href');

				// Menghapus 'active' class dari semua menu item
				$('.menu-link').removeClass('active');

				// Menambah 'active' class ke menu yang diklik
				$(this).addClass('active');

				// Menyimpan nilai menu yang dipilih di localStorage
				localStorage.setItem('activeMenu', href);

				// Tidak perlu lagi mencegah perilaku default
				// Karena Anda ingin memuat halaman baru
			});
		});
	</script>
	<!--end::Page Custom Javascript-->
	<!--end::Javascript-->
</body>
<!--end::Body-->

</html>